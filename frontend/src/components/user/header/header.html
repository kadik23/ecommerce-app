<!-- Top Bar -->
<div class="drawer z-50">
    <input id="my-drawer-3" type="checkbox" class="drawer-toggle" />
    <div class="drawer-content flex flex-col">
        <!-- Navbar -->
        <div
            class=" flex items-center width-full px-2 bg-white border-gray-200 dark:bg-gray-900 w-full justify-between">
            <div class="flex-none md:hidden">
                <label for="my-drawer-3" aria-label="open sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                        class="inline-block h-6 w-6 stroke-current text-regal-brown">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </label>
            </div>
            <div class="flex items-center">
                <p class="mr-6 text-xs lg:text-sm flex items-center text-gray-500 dark:text-white">
                    <span class="material-symbols-outlined text-regal-brown"
                        style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 0,'opsz' 20">call</span>
                    <span>Free Support</span> (213) 0798816073
                </p>
            </div>
            <div class="md:flex items-center hidden">
                <DropDownVue v-if="isLoggedIn" :items="itemsLoggedIn" label="My account" :links="linksLoggedIn" />
                <DropDownVue v-else :items="itemsLoggedOut" label="My account" :links="linksLoggedOut" />
                <div class="dropdown" style="background-color: transparent">
                    <label tabindex="0"
                        class="btn text-nowrap lg:text-sm text-xs hover:text-regal-brown py-0 font-normal m-1"
                        style="background-color: transparent; border:none;">
                        Languages<span class="material-symbols-outlined">arrow_drop_down</span>
                    </label>
                    <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                        <li><a href="#">English</a></li>
                        <li><a href="#">Arabic</a></li>
                    </ul>
                </div>
                <a href="#"
                    class="text-xs mx-2 lg:text-sm hover:text-regal-brown transition-all duration-500 py-0">Contact
                    Us</a>
            </div>
        </div>
    </div>
    <div class="drawer-side">
        <label for="my-drawer-3" aria-label="close sidebar" class="drawer-overlay"></label>
        <ul class="menu bg-base-200 min-h-full w-80 p-4">
            <DropDownVue v-if="isLoggedIn" :items="itemsLoggedIn" label="My account" :links="linksLoggedIn" />
            <DropDownVue v-else :items="itemsLoggedOut" label="My account" :links="linksLoggedOut" />
            <div class="dropdown" style="background-color: transparent">
                <label tabindex="0"
                    class="btn text-nowrap lg:text-sm text-xs hover:text-regal-brown py-0 font-normal m-1"
                    style="background-color: transparent; border:none;">
                    Languages<span class="material-symbols-outlined">arrow_drop_down</span>
                </label>
                <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                    <li><a href="#">English</a></li>
                    <li><a href="#">Arabic</a></li>
                </ul>
            </div>
            <a href="#"
                class="text-xs mx-2 lg:text-sm hover:text-regal-brown transition-all duration-500 py-0">ContactUs</a>
        </ul>
    </div>
</div>

<!-- Main Navbar -->
<nav id="menu" class="bg-gray-50 transition-all duration-1000 dark:bg-gray-700">
    <div class="max-w-screen-xl flex justify-between items-center px-4 py-7 mx-auto" id="navBottom">
        <a href="/" class="flex items-center">
            <img src="@/assets/images/logo.png"
                class="h-8 mr-3 hover:scale-150 transition-all duration-500 rounded-full" alt="Flowbite Logo" />
            <span
                class="self-center opacity-75 text-sm lg:text-xl font-semibold whitespace-nowrap dark:text-white">Stanissk
                Store</span>
        </a>
        <div class="items-center hidden lg:flex " id="categories" v-if="searchBarHidden">
            <ul class="flex flex-row font-medium mt-0 mr-6 space-x-8 text-sm">
                <li><a href="/"
                        class="text-gray-900 dark:text-white hover:text-regal-brown transition-all duration-500 category"
                        aria-current="page">Home</a></li>
                <li @click="scrollTo(sectionRefPhones)"><button id="phone_btn"
                        class="text-gray-900 dark:text-white hover:text-regal-brown transition-all duration-500 category">Phones</button>
                </li>
                <li @click="scrollTo(sectionRefAccessories)"><button id="accessory_btn"
                        class="text-gray-900 dark:text-white hover:text-regal-brown transition-all duration-500 category">Accessories</button>
                </li>
                <li @click="scrollTo(sectionRefElectronics)"><button id="electronic_btn"
                        class="text-gray-900 dark:text-white hover:text-regal-brown transition-all duration-500 category">Electronics</button>
                </li>
            </ul>
        </div>
        <div class="items-center flex-wrap md:flex-nowrap hidden md:flex" id="searchBar" v-else>
            <SearchBarVue :categories="categoriesLinks" />
            <span @click="toggleSearch"
                class="material-symbols-outlined text-3xl ml-10 hover:text-regal-brown transition-all duration-500 cursor-pointer"
                id="close">close</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="flex items-center" id="buttons">
                <ul class="flex flex-row font-medium mt-0 mr-6 space-x-8 text-sm">
                    <li>
                        <label for="voice-search" class="sr-only">Search</label>
                        <button id="searchbtn" type="button"
                            class="inline-flex ml-2 text-sm bg-transparent rounded-lg focus:outline-none dark:bg-regal-brown dark:hover:bg-regal-700brown dark:focus:ring-amber-700">
                            <span @click="toggleSearch"
                                class="material-symbols-outlined cursor-pointer hover:text-regal-brown transition-all duration-500"
                                style="font-variation-settings:'FILL' 0,'wght' 300,'GRAD' 0,'opsz' 20">search</span>
                        </button>
                    </li>
                    <li v-if="isLoggedIn">
                        <div class="dropdown dropdown-end" style="background-color: transparent">
                            <div tabindex="0" class="relative inline-block"
                                style="background-color: transparent; border:none;">
                                <div
                                    class="w-4 h-4 cursor-pointer bg-regal-brown text-white rounded-full flex items-center justify-center text-xs font-semibold absolute -top-1 -right-1">
                                    4</div>
                                <span
                                    class="material-symbols-outlined cursor-pointer hover:text-regal-brown transition-all duration-500"
                                    style="font-variation-settings:'FILL' 0,'wght' 300,'GRAD' 0,'opsz' 20">notifications</span>
                            </div>
                            <ul tabindex="0"
                                class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-80">
                                <div
                                    class="block px-4 py-2 font-medium text-center text-gray-700 rounded-t-lg bg-gray-50 dark:bg-gray-800 dark:text-white">
                                    Notifications</div>
                                <li>
                                    <a href="#" class="flex px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700">
                                        <div class="flex-shrink-0">
                                            <img class="rounded-full w-11 h-11" src="" alt="Jese image">
                                            <div
                                                class="absolute flex items-center justify-center w-5 h-5 ml-6 -mt-5 bg-regal-brown border border-white rounded-full dark:border-gray-800">
                                                <svg class="w-2 h-2 text-white" aria-hidden="true"
                                                    xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                                                    viewBox="0 0 18 18">
                                                    <path
                                                        d="M1 18h16a1 1 0 0 0 1-1v-6h-4.439a.99.99 0 0 0-.908.6 3.978 3.978 0 0 1-7.306 0 .99.99 0 0 0-.908-.6H0v6a1 1 0 0 0 1 1Z" />
                                                    <path
                                                        d="M4.439 9a2.99 2.99 0 0 1 2.742 1.8 1.977 1.977 0 0 0 3.638 0A2.99 2.99 0 0 1 13.561 9H17.8L15.977.783A1 1 0 0 0 15 0H3a1 1 0 0 0-.977.783L.2 9h4.239Z" />
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="w-full pl-3">
                                            <div class="text-gray-500 text-sm mb-1.5 dark:text-gray-400">New message
                                                from
                                                <span class="font-semibold text-gray-900 dark:text-white">Jese
                                                    Leos</span>:
                                                "Hey, what's up? All set for the presentation?"
                                            </div>
                                            <div class="text-xs text-regal-brown dark:text-regal-amber-"></div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li v-if="isLoggedIn">
                        <div class="dropdown dropdown-end bg-transparent">
                            <div tabindex="0" class="relative inline-block bg-transparent border-none">
                                <div
                                    class="w-4 h-4 cursor-pointer bg-regal-brown text-white rounded-full flex items-center justify-center text-xs font-semibold absolute -top-1 -right-1">
                                    {{favoriteNbr}}
                                </div>
                                <span
                                    class="material-symbols-outlined cursor-pointer hover:text-regal-brown transition-all duration-500"
                                    style="font-variation-settings:'FILL' 0,'wght' 300,'GRAD' 0,'opsz' 20">
                                    favorite
                                </span>
                            </div>
                            <ul tabindex="0"
                                class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-80">
                                <div
                                    class="block px-4 py-2 font-medium text-center text-gray-700 rounded-t-lg bg-gray-50 dark:bg-gray-800 dark:text-white">
                                    Favorite
                                </div>
                                <div v-for="product in favoriteProducts" :key="product.id">
                                    <li>
                                        <a href="#" class="flex px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">
                                            <div class="w-32 overflow-hidden">
                                                <img class="object-cover h-20" :src="product.image" alt="Product image">
                                            </div>
                                            <div class="w-full pl-3">
                                                <div class="text-gray-500 text-md mb-1 dark:text-gray-400">
                                                    <span class="font-bold text-gray-900 dark:text-white">{{
                                                        product.name }}</span>
                                                </div>
                                                <div class="text-gray-500 text-sm mb-1 dark:text-gray-400">
                                                    <span class="opacity-80 text-gray-900 dark:text-white">{{
                                                        product.seller }}</span>
                                                </div>
                                                <div
                                                    class="text-lg text-bold text-regal-brown dark:text-regal-amber-700">
                                                    {{ product.price }}</div>
                                            </div>
                                        </a>
                                    </li>
                                    <hr class="opacity-70 p-0">
                                </div>
                                <a href="#"
                                    class="block py-2 text-sm font-medium text-center text-gray-900 rounded-b-lg bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-white">
                                    <div class="inline-flex items-center">
                                        <svg class="w-4 h-4 mr-2 text-gray-500 dark:text-gray-400" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 14">
                                            <path
                                                d="M10 0C4.612 0 0 5.336 0 7c0 1.742 3.546 7 10 7 6.454 0 10-5.258 10-7 0-1.664-4.612-7-10-7Zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" />
                                        </svg>
                                        View all
                                    </div>
                                </a>
                            </ul>
                        </div>
                    </li>
                    <li v-if="isLoggedIn">
                        <div class="dropdown dropdown-notifications dropdown-bottom dropdown-left bg-transparent">

                            <div tabindex="0" @click="resetToZero" data-toggle="collapse"
                                class="relative border-none bg-transparent inline-block">
                                <div 
                                    class="w-4 h-4 notif-count cursor-pointer  bg-regal-brown text-white rounded-full flex items-center justify-center text-xs font-semibold absolute -top-1 -right-1">
                                    {{ notificationCount }}
                                </div>
                                <span
                                    class="material-symbols-outlined cursor-pointer hover:text-regal-brown transition-all duration-500"
                                    style="font-variation-settings:'FILL' 0,'wght' 300,'GRAD' 0,'opsz' 20">
                                    shopping_bag
                                </span>
                            </div>

                            <ul tabindex="0" id="scrollable-container"
                                class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-[350px]">
                                <div
                                    class="block px-4 py-2 font-medium text-center text-gray-700 rounded-t-lg bg-gray-50 dark:bg-gray-800 dark:text-white">
                                    Cart
                                </div>
                                <li v-for="cart in carts" :key="cart.id" class="flex flex-row items-center">
                                    <router-link to="/carts" class="flex px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">
                                        <div class="w-32 overflow-hidden">
                                            <img :src="`/assets/images/products/${cart.img}`" class="object-cover h-20" alt="image">
                                        </div>
                                        <div class="w-full pl-3">
                                            <div class="text-gray-500 text-md mb-1 dark:text-gray-400"><span class="font-bold text-gray-900 dark:text-white">{{ cart.name }}</span></div>
                                            <div class="text-gray-500 text-sm mb-1 dark:text-gray-400"><span class="opacity-80 text-gray-900 dark:text-white">{{ cart.user_id }}</span></div>
                                            <div class="text-lg text-bold text-regal-brown dark:text-regal-amber-700">{{ cart.price }}</div>
                                        </div>
                                    </router-link>
                                    <a href="#" @click="deleteCard(cart[0].id)" class="delete_cart hover:bg-transparent">
                                        <span  class="ml-2 material-symbols-outlined cursor-pointer text-regal-brown hover:bg-transparent hover:text-amber-700">
                                            close
                                        </span>
                                    </a>
                                </li>
                                <hr class="opacity-70 p-0">
                                <li>
                                    <router-link to="/carts"
                                        class="block py-2 text-sm font-medium text-center text-gray-900 rounded-b-lg bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-white">
                                        <div class="inline-flex items-center ">
                                            <svg class="w-4 h-4 mr-2 text-gray-500 dark:text-gray-400"
                                                aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                                fill="currentColor" viewBox="0 0 20 14">
                                                <path
                                                    d="M10 0C4.612 0 0 5.336 0 7c0 1.742 3.546 7 10 7 6.454 0 10-5.258 10-7 0-1.664-4.612-7-10-7Zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" />
                                            </svg>
                                            View all
                                        </div>
                                    </router-link>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
            <DrawerVue DrawerId='navbar2' />
        </div>
    </div>
</nav>